#!/bin/sh
# Pre-push hook for additional validation

echo "ğŸš€ Running pre-push validations..."

# Run ESLint but allow warnings (only block on errors)
echo "ğŸ“‹ Running ESLint on entire codebase (errors only)..."
npx eslint . --cache --max-warnings 999 --report-unused-disable-directives || {
  echo "âš ï¸  ESLint found errors. Please fix critical errors before pushing."
  echo "ğŸ’¡ Run 'npm run lint:fix' to auto-fix issues where possible."
  exit 1
}

# Run type checking
echo "ğŸ” Running TypeScript type checking..."
npm run check-types

# Run unit tests to ensure nothing is broken
echo "ğŸ§ª Running unit tests..."
npm run test

echo "âœ… Pre-push validations completed successfully!"