#!/bin/sh
# Pre-push hook for additional validation

echo "🚀 Running pre-push validations..."

# Run format check first (this ensures code is properly formatted)
echo "🎨 Checking code formatting with Prettier and ESLint..."
npm run format:check || {
  echo "⚠️  Code formatting issues found. Please fix formatting before pushing."
  echo "💡 Run 'npm run format' to auto-fix formatting issues."
  exit 1
}

# Run type checking
echo "🔍 Running TypeScript type checking..."
npm run check-types || {
  echo "⚠️  TypeScript type checking failed. Please fix type errors before pushing."
  exit 1
}

# Run unit tests to ensure nothing is broken
echo "🧪 Running unit tests..."
npm run test || {
  echo "⚠️  Unit tests failed. Please fix failing tests before pushing."
  exit 1
}

echo "✅ Pre-push validations completed successfully!"