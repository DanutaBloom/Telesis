#!/bin/sh
# Pre-push hook for additional validation

echo "ğŸš€ Running pre-push validations..."

# Run format check first (this ensures code is properly formatted)
echo "ğŸ¨ Checking code formatting with Prettier and ESLint..."
npm run format:check || {
  echo "âš ï¸  Code formatting issues found. Please fix formatting before pushing."
  echo "ğŸ’¡ Run 'npm run format' to auto-fix formatting issues."
  exit 1
}

# Run type checking
echo "ğŸ” Running TypeScript type checking..."
npm run check-types || {
  echo "âš ï¸  TypeScript type checking failed. Please fix type errors before pushing."
  exit 1
}

# Run unit tests to ensure nothing is broken
echo "ğŸ§ª Running unit tests..."
npm run test || {
  echo "âš ï¸  Unit tests failed. Please fix failing tests before pushing."
  exit 1
}

echo "âœ… Pre-push validations completed successfully!"